# 📈 株価分析ツール Pro - Phase 5

## 🌟 概要

**スイング投資向け**の日本株式総合分析Webアプリケーションです。

### ✨ Phase 5の新機能
- 💼 **ポートフォリオ管理システム**: 保有銘柄の一元管理・損益追跡
- 📋 **ウォッチリスト機能**: 注目銘柄の監視・目標価格設定
- 📝 **投資ノート**: 銘柄別メモ・売買判断理由記録
- 🗄️ **SQLiteデータベース**: ローカル高速DB + 自動バックアップ
- 🎨 **5タブUI統合**: ポートフォリオ管理タブを新規追加
- 📊 **REST API**: ポートフォリオデータのCRUD操作対応

### 🔗 アクセス
**本番環境**: [https://web-production-7ddba.up.railway.app](https://web-production-7ddba.up.railway.app)

## 🚀 機能一覧

### 📊 分析機能

#### 基本テクニカル分析
- **移動平均線**: 5日、25日、75日
- **RSI指標**: 14日期間
- **ゴールデンクロス/デッドクロス**: 自動検出
- **売買シグナル**: RSI + トレンド分析

#### 🆕 高度テクニカル分析
- **🎯 ボリンジャーバンド**: 
  - 20日移動平均 ± 2σ
  - スクイーズ検出
  - バンドウォーク判定
- **📊 MACD**: 
  - 12/26日EMA
  - シグナル線・ヒストグラム
  - ゴールデンクロス/デッドクロス
- **⚡ ストキャスティクス**: 
  - %K/%D線（14日期間）
  - 買われすぎ/売られすぎ判定
  - クロスシグナル検出
- **📈 出来高分析**: 
  - 出来高移動平均比較
  - 異常出来高検出
  - トレンド確認

#### ファンダメンタル分析
- **バリュエーション**: PER/PBR分析
- **適正株価算出**: 4つの手法による計算
- **配当分析**: 利回り・成長率評価
- **財務健全性**: ROE・負債比率等
- **総合投資判断**: 100点満点スコア

#### バックテスト・ストラテジー分析
- **🔄 5つの投資戦略**: 
  - **RSI戦略**: 買われすぎ・売られすぎ逆張り
  - **ゴールデンクロス戦略**: 移動平均線順張り
  - **MACD戦略**: MACDクロス検出
  - **ボリンジャーバンド戦略**: バンド逆張り
  - **複合戦略**: 複数指標の統合判定
- **📊 包括的パフォーマンス分析**: 
  - **基本統計**: 総リターン、勝率、取引回数、平均保有期間
  - **リスク指標**: 最大ドローダウン、ボラティリティ、シャープレシオ、VaR
  - **収益性指標**: プロフィットファクター、ペイオフレシオ、期待値
  - **市場比較**: バイ&ホールド比較、アルファ、ベータ
- **💼 カスタム設定**: 
  - **期間設定**: 任意の開始日〜終了日
  - **初期資金**: 50万〜300万円（カスタム設定可能）
  - **戦略パラメータ**: RSI閾値、移動平均期間等

#### 🆕 ポートフォリオ管理
- **📈 保有銘柄管理**: 
  - 株数・平均取得価格・現在価格の自動更新
  - 損益計算・利益率表示・評価額算出
  - ポートフォリオサマリー（総投資額・現在価値・損益）
- **📋 ウォッチリスト**: 
  - 注目銘柄の登録・監視機能
  - 目標価格設定・現在価格との比較
  - カテゴリ別分類（成長株・配当株・バリュー株等）
- **📝 投資ノート**: 
  - 銘柄別投資メモ・分析記録
  - 売買判断の理由・根拠記録
  - 投資アイデア・戦略メモ
- **🗄️ データ管理**: 
  - SQLiteローカルDB + 自動バックアップ
  - 過去の分析結果履歴保存
  - JSON形式でのデータエクスポート

### 🎨 UI/UX機能
- **5タブ構成**: 基本・高度・ファンダメンタル・バックテスト・ポートフォリオ
- **レスポンシブデザイン**: PC・タブレット・モバイル対応
- **インタラクティブチャート**: ズーム・パン対応
- **シグナル強度表示**: 🔥⚡💡アイコン
- **教育コンテンツ**: 指標・戦略の詳細解説
- **プリセット機能**: 期間・資金の簡単設定
- **総合評価システム**: 優秀/良好/要改善の自動判定

## 📖 使用方法

### 1. アクセス
ブラウザで本番URLにアクセス：
```
https://web-production-7ddba.up.railway.app
```

### 2. 基本操作
1. **銘柄コード入力**: 4桁の東証銘柄コード（例：7203）
2. **期間選択**: 3ヶ月/6ヶ月/1年
3. **分析開始**: ボタンクリックで分析実行

### 3. タブ切り替え
- **基本テクニカル**: 移動平均線・RSI・基本シグナル
- **高度テクニカル**: 4つの高度指標・詳細解説
- **ファンダメンタル**: 企業価値・財務分析
- **バックテスト**: 戦略検証・パフォーマンス分析
- **🆕 ポートフォリオ**: 保有銘柄管理・ウォッチリスト・投資ノート

### 4. バックテスト実行方法
1. **「バックテスト」タブを選択**
2. **期間設定**: 開始日〜終了日を指定（プリセット使用可能）
3. **戦略選択**: 5つの戦略から選択
4. **初期資金設定**: 投資元本を設定（プリセット使用可能）
5. **実行**: 「バックテスト実行」ボタンをクリック
6. **結果確認**: パフォーマンス指標・取引履歴・チャートを確認

### 5. ポートフォリオ管理方法
1. **「ポートフォリオ」タブを選択**
2. **保有銘柄追加**: 銘柄コード・株数・平均価格を入力
3. **ウォッチリスト**: 注目銘柄・目標価格・カテゴリを設定
4. **投資ノート**: 銘柄別メモ・売買理由を記録
5. **データ管理**: 自動バックアップ・履歴確認

## 📊 分析結果の見方

### 基本テクニカル分析
| 指標 | 買いシグナル | 売りシグナル |
|------|-------------|-------------|
| **RSI** | 30以下（売られすぎ） | 70以上（買われすぎ） |
| **移動平均** | ゴールデンクロス | デッドクロス |

### 高度テクニカル分析

#### 🎯 ボリンジャーバンド
- **上限タッチ** → 🔴 売りシグナル（買われすぎ）
- **下限タッチ** → 🟢 買いシグナル（売られすぎ）
- **バンド縮小** → 🟡 大きな値動き前の前兆

#### 📊 MACD
- **ゴールデンクロス** → 🟢 買いシグナル
- **デッドクロス** → 🔴 売りシグナル
- **ヒストグラム拡大** → 📈 トレンド強化

#### ⚡ ストキャスティクス
- **80%以上** → 🔴 買われすぎ（売り検討）
- **20%以下** → 🟢 売られすぎ（買い検討）
- **%K > %D** → ✨ 上昇の勢い

#### 📈 出来高分析
- **2倍以上** → 🔥 異常出来高（重要な動き）
- **1.5倍以上** → 📊 高出来高（注目）
- **上昇+高出来高** → 💡 上昇トレンド信頼性高

### シグナル強度
- **🔥 強**: 信頼度の高いシグナル
- **⚡ 中**: 注意深く観察
- **💡 弱**: 参考程度

### 🆕 バックテスト結果の解釈

#### パフォーマンス指標の見方
| 指標 | 良好な値 | 注意が必要 | 意味 |
|------|---------|-----------|------|
| **総リターン** | +10%以上 | マイナス | 投資期間中の総収益率 |
| **勝率** | 60%以上 | 40%未満 | 利益を出した取引の割合 |
| **シャープレシオ** | 1.0以上 | 0.5未満 | リスク調整後リターン |
| **最大ドローダウン** | 10%未満 | 20%以上 | 最大下落幅 |

#### 戦略評価
- **🏆 優秀**: 総合スコア80+、安定した利益
- **✅ 良好**: 総合スコア60+、概ね良好な成果
- **⚠️ 要改善**: 総合スコア60未満、見直し推奨

#### 実例：RSI戦略（7203、2025年4-7月）
```
✅ 成果例
総リターン: +15.21% (¥152,084の利益)
取引回数: 1回
勝率: 100%
保有期間: 28日間
判定: 🏆 優秀
```

## 💡 推奨銘柄

| 銘柄コード | 企業名 | 特徴 | 分析適性 |
|----------|-------|------|---------|
| **7203** | トヨタ自動車 | 大型株・安定 | 🌟🌟🌟 |
| **6758** | ソニーグループ | 値動き大・成長 | 🌟🌟🌟 |
| **9984** | ソフトバンクG | 高ボラティリティ | 🌟🌟 |
| **8306** | 三菱UFJ | 金融株代表 | 🌟🌟 |

## 🔧 ローカル開発環境

### 初回セットアップ
```bash
# リポジトリクローン
git clone https://github.com/ibiza116/stock-analysis.git
cd stock-analysis

# 仮想環境作成・有効化
python -m venv myenv
source myenv/bin/activate  # Linux/Mac
# myenv\Scripts\activate   # Windows

# 依存関係インストール
pip install -r requirements.txt
```

### 起動方法
```bash
# 仮想環境有効化
source myenv/bin/activate

# アプリケーション起動
python app.py
```

### 自動デプロイ設定
```bash
# .envファイル作成（GitHub Personal Access Token設定）
echo "GITHUB_TOKEN=ghp_your_token_here" > .env

# 自動デプロイ実行
./auto_deploy.sh
```

## ⚠️ 注意事項・制限事項

### データについて
- **データソース**: Yahoo Finance
- **更新頻度**: 市場終了後
- **対象銘柄**: 東証上場銘柄のみ
- **データ遅延**: 約20分

### 分析の制限
- **最小データ期間**: 各指標で異なる
  - RSI: 14日
  - MACD: 26日
  - ボリンジャーバンド: 20日
  - ストキャスティクス: 14日

### システム制限
- **API制限**: 連続リクエストに注意
- **同時接続**: 本番環境での制限あり

## 🔍 トラブルシューティング

### よくある問題

#### 1. 銘柄が見つからない
```
解決法: 4桁の東証銘柄コードを確認
例: 7203, 6758, 9984
```

#### 2. 指標が表示されない
```
解決法: より長い期間（6ヶ月・1年）を選択
理由: データ不足による計算不可
```

#### 3. 通信エラー
```
解決法: 
1. インターネット接続確認
2. しばらく時間をおいて再試行
3. ブラウザキャッシュクリア
```

### デバッグ方法
1. **ブラウザ**: F12 → Console確認
2. **ネットワーク**: F12 → Network確認
3. **再読み込み**: Ctrl + F5

## 📚 投資判断の参考

### 基本原則
- **複数指標の確認**: 単一指標での判断は避ける
- **トレンド確認**: 長期・短期両方を確認
- **リスク管理**: 損切りライン設定
- **資金管理**: 余剰資金での投資

### シグナル組み合わせ例
```
強い買いシグナル:
RSI < 30 + ボリンジャー下限タッチ + MACDゴールデンクロス

強い売りシグナル:
RSI > 70 + ボリンジャー上限タッチ + MACDデッドクロス
```

## 🎯 今後の開発予定

### ✅ Phase 4: バックテスト機能（完了）
- ✅ 過去データでの戦略検証
- ✅ 包括的パフォーマンス指標計算（20+指標）
- ✅ リスク分析機能（シャープレシオ、VaR等）
- ✅ 5つの投資戦略実装
- ✅ 初心者向けUI・ガイド機能

### ✅ Phase 5: ポートフォリオ管理（完了）
- ✅ 保有銘柄管理・損益追跡
- ✅ ウォッチリスト機能・目標価格設定
- ✅ 投資ノート・売買理由記録
- ✅ SQLiteデータベース・自動バックアップ
- ✅ 5タブUI統合・REST API実装

### Phase 6: アラート・通知機能
- リアルタイム価格監視
- シグナル通知（メール/Slack）
- ポートフォリオアラート
- カスタムアラート設定

### Phase 7: 高度ポートフォリオ分析
- 複数銘柄相関分析
- リスク分散最適化
- セクター分析・業界比較
- 効率的フロンティア計算

### Phase 8: AI予測機能
- LSTM価格予測
- ニュース感情分析
- 機械学習モデル統合
- アンサンブル予測

## 📞 サポート・情報

### 技術情報
- **フレームワーク**: Flask + Plotly
- **データ取得**: yfinance
- **デプロイ**: Railway
- **リポジトリ**: [GitHub](https://github.com/ibiza116/stock-analysis)

### 免責事項
本ツールは投資判断の参考情報を提供するものです。投資による損失について開発者は責任を負いません。投資は自己責任で行ってください。

---

**バージョン**: 5.0.0 (Phase 5)  
**最終更新**: 2025-08-04  
**動作確認**: ✅ 本番環境デプロイ完了（Phase 5）  
**自動デプロイ**: 🔧 設定完了・Phase 5リリース済み