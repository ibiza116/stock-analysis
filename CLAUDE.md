# 株価分析ツール - Claude開発メモ

## プロジェクト概要
スイング投資向けの日本株式テクニカル分析ツール。Flask + yfinance + Plotlyで構築。

**現在のバージョン**: Phase 5 (ポートフォリオ管理システム完了)
**稼働状況**: 🚀 本番環境デプロイ済み (Phase 5)
**本番URL**: https://web-production-7ddba.up.railway.app
**GitHubリポジトリ**: https://github.com/ibiza116/stock-analysis
**開発環境**: Python仮想環境 (`myenv/`)
**自動デプロイ**: 設定済み (`auto_deploy.sh`)

## プロジェクト構成

```
stock-analysis-tool/
├── app.py                     # Flaskメインアプリケーション
├── requirements.txt           # 依存ライブラリ（>=バージョン指定）
├── myenv/                     # Python仮想環境
├── templates/
│   └── index.html            # フロントエンド（デバッグ機能付き）
├── static/                   # 静的ファイル用（未使用）
├── analyzers/
│   ├── __init__.py
│   ├── data_fetcher.py       # yfinanceデータ取得
│   ├── technical.py          # テクニカル分析（Phase3: 高度指標追加）
│   ├── fundamental.py        # ファンダメンタル分析（Phase2追加）
│   ├── backtester.py         # バックテストエンジン（Phase4追加）
│   ├── strategies.py         # 投資戦略定義（Phase4追加）
│   └── performance.py        # パフォーマンス分析（Phase4追加）
├── routes/
│   ├── __init__.py
│   └── portfolio.py          # ポートフォリオ管理API（Phase5追加）
├── utils/
│   ├── __init__.py
│   └── database.py           # SQLite DB管理（Phase5追加）
├── data/
│   ├── cache/                # データキャッシュ（Phase5追加）
│   ├── database/             # SQLiteデータベース（Phase5追加）
│   │   ├── analysis.db       # メインDB
│   │   └── backups/          # DB自動バックアップ
│   └── exports/              # エクスポートファイル（Phase5追加）
├── logs/                     # ログファイル（Phase5追加）
├── wsgi.py                    # Gunicorn WSGI エントリーポイント
├── Dockerfile                 # Railway デプロイ用
├── railway.toml              # Railway 設定ファイル
├── README.local.md           # ローカル開発用ドキュメント
├── auto_deploy.sh            # 自動デプロイスクリプト（Phase3追加）
├── .env                      # 環境変数設定（GitHub Token等）
└── stock-analysis-tool-spec.md  # 元仕様書
```

## セットアップ手順

### 1. 仮想環境作成・有効化
```bash
# 仮想環境作成（既存の場合スキップ）
python -m venv myenv

# 仮想環境有効化
# Windows
myenv\Scripts\activate
# Linux/Mac
source myenv/bin/activate
```

### 2. 依存関係インストール
```bash
pip install -r requirements.txt
```

### 3. アプリケーション起動
```bash
python app.py
```

### 4. ブラウザでアクセス
```
http://localhost:5000
```

## 現在の実装機能

### ✅ 完成済み機能

#### Phase 1: テクニカル分析（完了）
- **株価データ取得**: yfinanceによる東証銘柄データ取得
- **基本テクニカル分析**: 
  - 移動平均線（5日、25日、75日）
  - RSI（14日）
  - ゴールデンクロス・デッドクロス検出
- **チャート表示**: Plotlyインタラクティブチャート
- **売買シグナル**: RSIベース + ゴールデンクロス
- **UIデバッグ機能**: コンソールログ出力
- **エラーハンドリング**: NaN値対応、通信エラー処理

#### Phase 2: ファンダメンタル分析（完了）
- **バリュエーション分析**: 
  - PER/PBR比較分析（市場平均との比較）
  - 割安/割高評価システム
  - 総合バリュエーション判定
- **適正株価計算**: 
  - PERベース適正株価
  - PBRベース適正株価
  - 配当割引モデル（簡易版）
  - ROEベース適正株価（Graham formula）
  - 平均適正株価と上昇余地の算出
- **配当分析**: 
  - 配当利回り分析
  - 配当性向評価
  - 配当成長率計算（過去5年）
  - 市場平均との比較
- **財務健全性分析**: 
  - ROE、ROA分析
  - 負債比率評価
  - 流動比率・当座比率
  - 営業利益率・純利益率
  - 財務スコア算出（100点満点）
- **総合投資判断**: 
  - 総合スコア（100点満点）
  - 買い/売り推奨判定
  - ポジティブ要因・リスク要因の抽出
  - 投資機会の提示

#### Phase 3: 高度テクニカル分析 + UI刷新（完了 🆕）
- **高度テクニカル指標**: 
  - 🎯 **ボリンジャーバンド**: 20日SMA ± 2σ、スクイーズ検出
  - 📊 **MACD**: 12/26日EMA、シグナル線、ヒストグラム
  - ⚡ **ストキャスティクス**: %K/%D線、買われすぎ/売られすぎ判定
  - 📈 **出来高分析**: 出来高移動平均比較、異常出来高検出
- **高度シグナル分析**: 
  - 各指標の独立シグナル生成
  - 強度別分類（強/中/弱）
  - 統合シグナル表示
- **3タブUI構成**: 
  - 基本テクニカル分析
  - 高度テクニカル分析（解説付き）
  - ファンダメンタル分析
- **白基調クールデザイン**: 
  - 清潔感のある白ベースレイアウト
  - 上品なグラデーション効果
  - 高コントラストの視認性
  - 統一されたカラーパレット
- **教育コンテンツ**: 
  - 各指標の詳細解説
  - 構成要素の説明
  - 具体的な投資判断方法
  - シグナルの読み方ガイド
- **レスポンシブチャート**: 
  - 白基調Plotlyテーマ
  - 4分割グリッドレイアウト
  - インタラクティブズーム/パン

#### Phase 4: バックテスト・ストラテジー機能（完了）
- **🔄 バックテストエンジン**: 
  - 過去データでの戦略検証システム
  - カスタム期間設定（1年〜任意期間）
  - リアルタイム取引シミュレーション
  - 初期資金・ポジションサイズ設定
- **⚡ 5つの投資戦略**: 
  - **RSI戦略**: 買われすぎ・売られすぎ逆張り
  - **ゴールデンクロス戦略**: 移動平均線順張り
  - **MACD戦略**: MACDクロス検出
  - **ボリンジャーバンド戦略**: バンド逆張り
  - **複合戦略**: 複数指標の統合判定
- **📊 包括的パフォーマンス分析**: 
  - **基本統計**: 総リターン、勝率、取引回数、平均保有期間
  - **リスク指標**: 最大ドローダウン、ボラティリティ、シャープレシオ、ソルティノレシオ、VaR
  - **収益性指標**: プロフィットファクター、ペイオフレシオ、期待値
  - **効率性指標**: 連続勝敗、ホールド期間分析
  - **市場比較**: バイ&ホールド比較、アルファ、ベータ、情報比率
- **💼 バックテストUI**: 
  - 4タブ構成（基本・高度・ファンダ・バックテスト）
  - **📚 初心者向け説明セクション**: バックテストの概念と使い方を詳しく解説
  - **⚙️ 直感的設定パネル**: 期間・戦略・資金の3つのグループに整理
  - **🎯 戦略詳細説明**: 各戦略の特徴と仕組みをリアルタイム表示
  - **⏱️ プリセット機能**: 3ヶ月/6ヶ月/1年、50万/100万/300万円の簡単設定
  - **💡 結果解釈ガイド**: 各指標の意味と良し悪しの判断基準を解説
  - **🏆 総合評価システム**: 優秀/良好/要改善の3段階自動判定
  - **📊 視覚的フィードバック**: カラーコード付きパフォーマンスカード

#### Phase 5: ポートフォリオ管理システム（完了 🆕）
- **📈 ポートフォリオ管理**: 
  - 保有銘柄の一元管理・追跡機能
  - 株数・平均取得価格・現在価格の自動更新
  - 損益計算・利益率表示・評価額算出
  - ポートフォリオサマリー（総投資額・現在価値・損益）
- **📋 ウォッチリスト機能**: 
  - 注目銘柄の登録・監視機能
  - 目標価格設定・現在価格との比較
  - カテゴリ別分類（成長株・配当株・バリュー株等）
  - メモ・理由・投資戦略の記録
- **📝 投資ノート・履歴管理**: 
  - 銘柄別投資メモ・分析記録
  - 売買判断の理由・根拠記録
  - 投資アイデア・戦略メモ
  - 過去の分析結果履歴保存
- **🗄️ SQLiteデータベース**: 
  - ローカルSQLiteによる高速データ管理
  - 自動バックアップ機能（日次・週次）
  - JSON形式でのデータエクスポート
  - データベース復旧・移行機能
- **🎨 5タブUI統合**: 
  - 基本テクニカル分析
  - 高度テクニカル分析
  - ファンダメンタル分析
  - バックテスト機能
  - **ポートフォリオ管理（新規追加）**
- **📊 REST API設計**: 
  - `/api/portfolio/*` エンドポイント群
  - CRUD操作対応（作成・読取・更新・削除）
  - JSON形式でのデータ交換
  - エラーハンドリング・バリデーション

### 🔧 実装済み改善点
- **NaN値安全処理**: `_safe_float()`, `_safe_list()`メソッド
- **JSONシリアライゼーション修正**: Infinity/NaN値の安全な変換
- **フロントエンドデバッグ**: console.log追加、エラー詳細表示
- **UI改善**: スタイリング改善、デフォルト銘柄設定（7203）
- **初心者向けUI**: バックテスト機能の詳細説明とガイダンス
- **依存関係柔軟化**: requirements.txtで>=バージョン指定

## テスト銘柄
- **7203** (トヨタ) - 大型株、デフォルト設定
- **6758** (ソニー) - 値動きが大きい
- **9984** (ソフトバンクG) - ボラティリティ高
- **8306** (三菱UFJ) - 金融株

## 今後の開発計画

### Phase 4: バックテスト・検証機能（完了 ✅）
- [x] **バックテスト機能**: 
  - 過去データでの戦略検証
  - 包括的パフォーマンス指標計算
  - リスク分析（シャープレシオ、最大ドローダウン等）
- [x] **ストラテジー機能**: 
  - 5つの戦略実装（RSI、ゴールデンクロス、MACD、ボリンジャー、複合）
  - カスタムパラメータ設定
  - 複数指標の組み合わせ

### Phase 5: ポートフォリオ・データ管理（完了 ✅）
- [x] **ポートフォリオ分析**: 
  - 複数銘柄の同時監視・管理
  - 損益計算・利益率分析
  - ポートフォリオサマリー表示
- [x] **データ保存・履歴管理**: 
  - 過去の分析結果保存
  - ウォッチリスト機能
  - 投資日記・メモ機能
- [x] **データベース連携**: 
  - SQLiteローカルDB
  - 高速データアクセス
  - 自動バックアップ機能

### 🔄 次期開発予定

#### Phase 6: アラート・通知機能
- [ ] **リアルタイムアラート**: 
  - 価格アラート（指定価格到達時）
  - シグナルアラート（売買シグナル発生時）
  - ポートフォリオアラート（損益閾値到達時）
- [ ] **通知システム**: 
  - メール通知機能
  - Slack/Discord連携
  - ブラウザプッシュ通知
- [ ] **監視ダッシュボード**: 
  - リアルタイム価格監視
  - 複数銘柄同時表示
  - アラート履歴管理

### Phase 7: 高度なUI/UX
- [ ] **マルチデバイス対応**: 
  - モバイルレスポンシブ
  - タブレット最適化
  - PWA対応
- [ ] **テーマシステム**: 
  - ダークモード追加
  - カスタムテーマ
  - ユーザー設定保存
- [ ] **エクスポート機能**: 
  - PDF/Excel レポート出力
  - チャート画像保存
  - データCSVエクスポート

### Phase 8: AI・機械学習統合
- [ ] **価格予測モデル**: 
  - LSTM/GRU時系列予測
  - テクニカル指標ベース予測
  - アンサンブル学習
- [ ] **感情分析**: 
  - ニュース感情スコア
  - SNS sentiment分析
  - 市場センチメント指標

## 技術的詳細

### 使用ライブラリ
- **Flask**: Webアプリケーションフレームワーク
- **yfinance**: Yahoo Financeデータ取得
- **pandas/numpy**: データ処理
- **ta**: テクニカル分析ライブラリ
- **plotly**: インタラクティブチャート

### データフロー
1. フロントエンド → Flask API (`/analyze`)
2. `data_fetcher.py` → yfinance → 株価データ取得
3. `technical.py` → テクニカル分析実行
4. JSON結果 → フロントエンド → Plotlyチャート描画

### エラーハンドリング
- **NaN値処理**: `_safe_float()`, `_safe_list()`で安全な変換
- **API通信エラー**: try-catch + ユーザーフレンドリーなメッセージ
- **データ不足**: 移動平均線データ不足時の表示制御

## テスト結果

### Phase 3: 高度テクニカル分析テスト結果（2025-08-03）
- **テスト環境**: ローカル開発環境 + 本番環境
- **テスト銘柄**: 7203（トヨタ自動車）
- **テスト結果**: ✅ 全機能正常動作
- **新機能動作確認**:
  - ボリンジャーバンド: 正常描画・シグナル検出
  - MACD: ヒストグラム・ゴールデンクロス検出
  - ストキャスティクス: %K/%D線・買われすぎ判定
  - 出来高分析: 異常出来高検出・移動平均比較
  - 白基調UI: 全ブラウザで正常表示
  - 3タブ構成: タブ切り替え・レスポンシブ動作

### Phase 2: ファンダメンタル分析テスト結果（2025-08-02）
- **テスト銘柄**: 7203（トヨタ自動車）
- **テスト結果**: ✅ 全機能正常動作
- **分析結果例**:
  - PER: 7.58倍（割安）
  - PBR: 0.99倍（やや割安）
  - 総合評価: 割安
  - 平均適正株価: 6,158円（現在価格2,724円）
  - 投資判断: 買い推奨
  - 総合スコア: 80/100

### 動作確認項目
- ✅ yfinanceからの株価・財務データ取得
- ✅ 高度テクニカル指標計算（4種）
- ✅ シグナル分析・強度判定
- ✅ PER/PBR計算と評価
- ✅ 適正株価計算（4手法）
- ✅ 配当利回り・配当成長率分析
- ✅ 財務健全性スコア算出
- ✅ 総合投資判断生成
- ✅ 3タブUI表示・切り替え
- ✅ レスポンシブチャート表示
- ✅ 白基調デザイン統一
- ✅ 自動デプロイ機能

### Phase 4: バックテスト機能テスト結果（2025-08-03）
- **テスト環境**: ローカル開発環境 + 本番環境
- **テスト銘柄**: 7203（トヨタ自動車）
- **テスト期間**: 2025年4月1日〜7月31日
- **テスト結果**: ✅ 全機能正常動作

### 🆕 バックテスト計算修正完了（2025-08-30）
- **修正対象**: 初期資金・最終資産の表示エラー（¥0表示問題）
- **修正内容**:
  - `analyzers/performance.py`の`_calculate_basic_stats`メソッド修正
  - `initial_capital`と`final_value`フィールドを返り値に追加
  - フロントエンドの総リターン表示を`total_return_pct`に修正
- **修正結果**:
  - **修正前**: 初期資金¥0、最終資産¥0、総リターン121050%（異常値）
  - **修正後**: 初期資金¥1,000,000、最終資産¥1,121,050、総リターン12.1%（正常値）
- **テスト銘柄**: 9432（日本電信電話）
- **検証状況**: ✅ 正常動作確認済み

#### **🎯 戦略別テスト結果**:
- **RSI戦略**: 1取引、+15.21%の利益（¥152,084）
  - 買い: 2025-06-25（RSI 33.2）→ 売り: 2025-07-23（RSI 75.2）
  - 勝率: 100%、シャープレシオ: 2.15
- **複合戦略**: 閾値調整により適切なシグナル生成確認
- **パフォーマンス指標**: 20+の専門指標すべて正常計算

#### **🔧 解決した主要問題**:
- **JSONシリアライゼーション**: Infinity/NaN値の安全な処理
- **フロントエンドUI**: "undefined%"表示問題の完全解決
- **レイアウト重複**: グラフ/テーブル重複問題の解決
- **シグナル生成**: 個別戦略とバックテストエンジンの統合
- **レスポンシブ対応**: 全デバイスでの最適表示

#### **🚀 本番環境デプロイ確認**:
- **デプロイ日時**: 2025-08-03
- **コミット**: 2068d88 (2,562行追加)
- **ヘルスチェック**: ✅ 正常 (1.2秒応答)
- **機能確認**: バックテスト・レイアウト修正すべて反映

## 開発メモ

### 解決済み問題
1. **NaN値エラー**: RSI計算でNaN値が発生 → `_safe_float()`で対応
2. **移動平均線表示**: データ不足時のグラフエラー → null値チェック追加
3. **依存関係**: 固定バージョンによる互換性問題 → >=指定に変更
4. **Railwayデプロイ**: nixpacksビルダーでpipエラー → Dockerfile使用に変更
5. **ポート設定**: 固定ポートとPORT環境変数の競合 → 動的ポート対応
6. **ヘルスチェック**: 起動確認失敗 → `/health`エンドポイント追加
7. **JSONシリアライゼーション**: Infinity値でJSONエラー → `_safe_numeric()`で安全変換
8. **フロントエンド表示**: "undefined%"値表示 → nullish coalescing(`??`)で修正
9. **レイアウト重複**: グラフ/テーブル重複問題 → z-index管理・適切な間隔設定
10. **バックテスト0取引**: シグナル生成されない → 戦略別シグナル生成・閾値調整
11. **RSI閾値**: 30/70で信号なし → 35/65に調整してデータ範囲に対応
12. **🆕 バックテスト異常表示**: 初期資金¥0・総リターン121050%異常値 → `initial_capital`/`final_value`フィールド追加・表示修正（2025-08-30）

### 注意事項
- 東証銘柄は自動的に`.T`サフィックス追加
- RSI計算には最低14日のデータが必要
- 移動平均線は期間に応じてデータ不足の場合あり

### パフォーマンス
- yfinanceのAPI制限に注意（連続リクエスト）
- データ取得時間: 通常2-5秒
- チャート描画: リアルタイム

## トラブルシューティング

### よくある問題
1. **銘柄コードエラー**: 4桁数字 + 存在確認
2. **データ取得失敗**: 銘柄廃止・上場廃止の場合
3. **移動平均線が表示されない**: データ期間不足

### デバッグ方法
- ブラウザのデベロッパーツール → Console確認
- Flaskのdebug=Trueで詳細エラー表示
- print文でのデータ確認

## デプロイメント

### Railway本番環境
- **URL**: https://web-production-7ddba.up.railway.app
- **プラットフォーム**: Railway (Dockerベース)
- **自動デプロイ**: GitHubプッシュ時に自動実行
- **ヘルスチェック**: `/health` エンドポイント
- **環境変数**: `PORT` (Railway自動設定)

### 自動デプロイ機能（Phase3で追加）
#### 設定ファイル
```bash
# .env ファイル（GitHub Personal Access Token設定）
GITHUB_TOKEN=ghp_your_token_here
BASIC_AUTH_USERNAME=admin
BASIC_AUTH_PASSWORD=your_secure_password_here
SECRET_KEY=your_secret_key_here
```

#### 自動デプロイスクリプト
```bash
# 簡単デプロイ
./auto_deploy.sh

# または手動実行
source .env && git push https://$GITHUB_TOKEN@github.com/ibiza116/stock-analysis.git main
```

### デプロイ手順
1. **ローカル開発・テスト**
2. **自動デプロイ実行**: `./auto_deploy.sh`
3. **Railwayが自動ビルド・デプロイ**
4. **ヘルスチェック成功で公開完了**

### セキュリティ
- GitHub Personal Access Token使用
- `.env`ファイルでトークン管理
- `.gitignore`でトークン保護

### 本番環境設定
```dockerfile
# Dockerfile
FROM python:3.11-slim
# gcc for numpy/pandas compilation
# gunicorn with $PORT environment variable
# logging enabled for debugging
```

## 運用メモ
- **本番環境**: gunicornでproduction実行
- **セキュリティ**: Railway HTTPS自動設定済み
- **モニタリング**: Railwayダッシュボードでログ確認
- **スケーリング**: 必要に応じてRailway Proプラン検討

## 開発ワークフロー
1. **ローカル開発**: `python app.py` (詳細はREADME.local.md参照)
2. **テスト**: ブラウザで動作確認
3. **デプロイ**: GitHubプッシュで自動デプロイ
4. **確認**: 本番URLで動作確認

## トラブルシューティング（重要）

### ⚠️ テンプレート変更が反映されない問題（2025-08-29解決）

**症状**: 
- `templates/index.html`を修正してもブラウザで変更が反映されない
- Flaskサーバーを再起動しても古いUI要素が残る
- 分析機能が動作しない

**原因**: 
複数のPythonプロセスが同時実行されることによる競合状態

**✅ 解決手順（確実な方法）**:
```powershell
# 1. 全てのPythonプロセスを強制停止
powershell "Get-Process python -ErrorAction SilentlyContinue | Stop-Process -Force"

# 2. プロセス停止の確認
powershell "Get-Process python -ErrorAction SilentlyContinue | Select-Object Id,ProcessName,Path"

# 3. Flaskアプリケーションを単一インスタンスで再起動
cd "X:\stock-analysis"
python app.py
```

**デバッグ方法**:
```html
<!-- HTMLテンプレートにデバッグ識別子を追加 -->
<!-- DEBUG: Template served from templates/index.html v6.0 - Timestamp: 2025-08-29 13:45:00 -->

<!-- ヘッダーにバージョン表示 -->
<p style="color: #ff6b6b; font-weight: bold;">
    🔍 DEBUG: v6.0テンプレート正常動作中 (2025-08-29 13:45) - 不要ボタン削除済み
</p>
```

**JavaScript確認**:
```javascript
console.log('🔍 DEBUG: v6.0 JavaScript loaded successfully at', new Date().toLocaleString());
```

**重要**: キャッシュではなく**複数プロセス競合**が根本原因です。

### よくある問題
1. **銘柄コードエラー**: 4桁数字 + 存在確認
2. **データ取得失敗**: 銘柄廃止・上場廃止の場合
3. **移動平均線が表示されない**: データ期間不足

### デバッグ方法
- ブラウザのデベロッパーツール → Console確認
- Flaskのdebug=Trueで詳細エラー表示
- print文でのデータ確認

## 現在の状況（2025-08-29更新）

### ✅ v6.0 完成機能
- **編集可能株式テーブル**: 銘柄の動的追加・削除
- **LocalStorage連携**: ブラウザでのデータ永続化
- **並列分析処理**: Promise.allによる高速化
- **デバッグ機能**: リアルタイム動作確認
- **UI改善**: 不要ボタン完全削除

### 🔧 技術仕様
- **フロントエンド**: HTML5 + Vanilla JavaScript + Plotly.js
- **バックエンド**: Flask + yfinance + pandas + ta
- **データベース**: SQLite (Phase 5)
- **デプロイ**: Railway (本番環境)

### 📊 動作確認済み機能
- ✅ テクニカル分析（基本・高度）
- ✅ ファンダメンタル分析
- ✅ バックテスト機能（5戦略）
- ✅ ポートフォリオ管理
- ✅ 編集可能株式テーブル（v6.0）

## 🎯 次回開発予定（ポートフォリオ機能実装）

### 📋 実装対象機能
1. **ポートフォリオ管理UI**: 保有銘柄の一覧表示・編集機能
2. **パフォーマンス監視**: リアルタイム損益計算・推移表示
3. **アラート機能**: 目標価格・損切りライン設定
4. **レポート機能**: ポートフォリオサマリー・分析レポート生成

### 🔧 技術的準備状況
- ✅ **SQLiteデータベース**: 既存実装済み（utils/database.py）
- ✅ **REST API基盤**: Flask APIエンドポイント群完成
- ✅ **フロントエンド基盤**: 3モード表示システム（投資判断・バックテスト・ポートフォリオ）
- ✅ **データ永続化**: LocalStorage + DB統合
- 🔄 **必要な作業**: ポートフォリオUI詳細実装・機能統合・テスト

### 📁 関連ファイル
- `routes/portfolio.py` - ポートフォリオAPI (既存)
- `utils/database.py` - DB管理 (既存)
- `templates/index.html` - フロントエンド (3モード統合済み)

---
**最終更新**: 2025-08-30
**現在バージョン**: v7.0 バックテスト修正版
**バックテスト修正**: ✅ 初期資金・総リターン表示問題解決（2025-08-30）
**Phase 5完了**: ✅ ポートフォリオ管理システム完成 + SQLiteDB統合
**Phase 4完了**: ✅ バックテスト・ストラテジー機能完成 + レイアウト最適化
**Phase 3完了**: ✅ 高度テクニカル分析 + 白基調UI完成
**動作確認**: 🚀 ローカル環境正常動作確認（2025-08-30）
**本番URL**: https://web-production-7ddba.up.railway.app (Phase 5版)
**自動デプロイ**: 🔧 設定完了・Phase 5デプロイ成功